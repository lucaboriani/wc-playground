document.querySelector(".hamburger").addEventListener("click",()=>{document.querySelector(".nav-links").classList.toggle("expanded")});async function p(n,e,o){const{callbackUrl:a=window.location.href,redirect:s=!0}=e??{},{prefix:c="/api/auth",...i}=e??{},t=n==="credentials",w=t||n==="email",d=`${`${c}/${t?"callback":"signin"}/${n}`}?${new URLSearchParams(o)}`,u=await fetch(`${c}/csrf`),{csrfToken:f}=await u.json(),l=await fetch(d,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...i,csrfToken:f,callbackUrl:a})}),r=await l.clone().json(),h=new URL(r.url).searchParams.get("error");if(s||!w||!h){window.location.href=r.url??a,r.url.includes("#")&&window.location.reload();return}return l}async function g(n){const{callbackUrl:e=window.location.href,prefix:o="/api/auth"}=n??{},a=await fetch(`${o}/csrf`),{csrfToken:s}=await a.json(),t=(await(await fetch(`${o}/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:s,callbackUrl:e})})).json()).url??e;window.location.href=t,t.includes("#")&&window.location.reload()}window.signIn=p;window.signOut=g;
