import{r as k}from"./index.ed373d49.js";import{a as d}from"./axios.4a70c6fc.js";import{F as T,T as g}from"./Form.3c0c4c84.js";import{j as n}from"./jsx-runtime.391947bd.js";const _="http://localhost:3000/api",i=_+"/tasks";function v(m){const[c,r]=k.useState(m.tasks),[e,l]=k.useState({task:""}),f=({currentTarget:t})=>{t.value===""?l({task:""}):l(s=>({...s,task:t.value}))},u=async t=>{try{if(e._id){const{data:s}=await d.post(i+"/tasks/"+e._id+".json",{task:e.task}),a=[...c],o=a.findIndex(x=>x._id===e._id);a[o]=s.data,r(a),l({task:""})}else{const{data:s}=await d.post(i+"/tasks.json",{task:e.task});console.log(s);const a=s.data.insertedId;e._id=a,r(o=>[...o,e]),l({task:""})}}catch(s){console.log(s)}},p=t=>{const s=c.filter(a=>a._id===t);l(s[0])},h=async t=>{try{const s=[...c],a=s.findIndex(x=>x._id===t),{data:o}=await d.post(i+"/"+t+".json",{completed:!s[a].completed});s[a]=o.data,r(s)}catch(s){console.log(s)}},j=async t=>{try{const{data:s}=await d.delete(i+"/"+t+".json");r(a=>a.filter(o=>o._id!==t))}catch(s){console.log(s)}};return n.jsxs("div",{className:"flex flex-col w-full  justify-center bg-black  rounded-xl",children:[n.jsx("h1",{className:"text-3xl text-slate-100 m-2",children:"Yess, another TodoList :( "}),n.jsxs("div",{className:"flex flex-col w-full items-center  p-2 rounded-xl box-border mb-5",children:[n.jsx(T,{task:e,addTask:u,handleChange:f}),c.map(t=>n.jsx(g,{task:t,updateTask:h,editTask:p,deleteTask:j},t._id)),c.length===0&&n.jsx("h2",{className:"flex items-center justify-center capitalize rounded-xl bg-slate-300 text-slate-800 text-2xl h-16",children:"No tasks"})]})]})}export{v as default};
