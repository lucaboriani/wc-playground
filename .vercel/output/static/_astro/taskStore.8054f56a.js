import{r as S}from"./index.ed373d49.js";import{a as d}from"./axios.4a70c6fc.js";let m=0,g=[];function w(){return m+=1,()=>{if(m-=1,m===0){let e=g;g=[];for(let t of e)t()}}}let f=Symbol(),I=(e,t,n,l)=>{let s={...e};s.set=(...r)=>{e[f]=t,e.set(...r),delete e[f]},e.setKey&&(s.setKey=(...r)=>{e[f]=t,e.setKey(...r),delete e[f]});let a=n(s,...l);if(a instanceof Promise){let r=w();return a.finally(r)}return a},p=(e,t,n)=>(...l)=>I(e,t,n,l),o=[],x=(e,t)=>{let n,l=[],s={lc:0,l:t||0,value:e,set(a){s.value=a,s.notify()},get(){return s.lc||s.listen(()=>{})(),s.value},notify(a){n=l;let r=!o.length;for(let i=0;i<n.length;i+=2)o.push(n[i],s.value,a,n[i+1]);if(r){for(let i=0;i<o.length;i+=4){let k=!1;for(let y=i+7;y<o.length;y+=4)if(o[y]<o[i+3]){k=!0;break}k?o.push(o[i],o[i+1],o[i+2],o[i+3]):o[i](o[i+1],o[i+2])}o.length=0}},listen(a,r){return l===n&&(l=l.slice()),s.lc=l.push(a,r||s.l)/2,()=>{l===n&&(l=l.slice());let i=l.indexOf(a);~i&&(l.splice(i,2),s.lc--,s.lc||s.off())}},subscribe(a,r){let i=s.listen(a,r);return a(s.value),i},off(){}};return s},b=(e={})=>{let t=x(e);return t.setKey=function(n,l){typeof l>"u"?n in t.value&&(t.value={...t.value},delete t.value[n],t.notify(n)):t.value[n]!==l&&(t.value={...t.value,[n]:l},t.notify(n))},t};function K(e,t,n){let l=new Set([...t,void 0]);return e.listen((s,a)=>{l.has(a)&&n(s,a)})}var E={exports:{}},T={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c=S;function _(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var j=typeof Object.is=="function"?Object.is:_,L=c.useState,O=c.useEffect,$=c.useLayoutEffect,A=c.useDebugValue;function Q(e,t){var n=t(),l=L({inst:{value:n,getSnapshot:t}}),s=l[0].inst,a=l[1];return $(function(){s.value=n,s.getSnapshot=t,v(s)&&a({inst:s})},[e,n,t]),O(function(){return v(s)&&a({inst:s}),e(function(){v(s)&&a({inst:s})})},[e]),A(n),n}function v(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!j(e,n)}catch{return!0}}function q(e,t){return t()}var P=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q:Q;T.useSyncExternalStore=c.useSyncExternalStore!==void 0?c.useSyncExternalStore:P;E.exports=T;var R=E.exports;function Y(e,t={}){let n=S.useCallback(s=>t.keys?K(e,t.keys,s):e.listen(s),[t.keys,e]),l=e.get.bind(e);return R.useSyncExternalStore(n,l,l)}const z="http://localhost:3000/api",h=z+"/tasks",B=async e=>{try{if(e._id){const{data:t}=await d.post(h+"/"+e._id+".json",{task:e.task});return t}else{const{data:t}=await d.post(h+"/tasks.json",{task:e.task});return t}}catch(t){console.log(t)}},C="http://localhost:3000/api",F=C+"/tasks",G=async(e,t)=>{try{const{data:n}=await d.post(F+"/"+e+".json",{completed:!t});return n}catch(n){console.log(n)}},H="http://localhost:3000/api",J=H+"/tasks",M=async e=>{try{return await d.delete(J+"/"+e+".json"),e}catch(t){console.log(t)}},u=b({}),Z=p(u,"initTaskItems",async(e,t)=>(Object.values(t).forEach(n=>{e.setKey(n._id,{_id:n._id,task:n.task,completed:n.completed})}),e.get())),U=x({task:""}),D=e=>{U.set(u.get()[e])},N=p(u,"postTaskItem",async(e,t)=>{const{insertedId:n}=await B(t),{task:l}=t,s=e.get()[n];return s?e.setKey(n,{...s,task:l,completed:s.completed}):e.setKey(n,{insertedId:n,task:l,completed:!1}),e.get()}),V=p(u,"updateTaskItem",async(e,t)=>{const{data:n}=await G(t._id,t.completed),{_id:l,task:s,completed:a}=n,r=e.get()[l];return r&&e.setKey(l,{...r,task:s,completed:a}),e.get()}),ee=p(u,"deleteTaskItem",async(e,t)=>{await M(t);const n={...e.get()};return n[t]&&(delete n[t],e.set(n)),e.get()});export{V as a,Z as b,ee as d,U as i,N as p,D as s,u as t,Y as u};
